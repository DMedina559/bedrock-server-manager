<!-- bedrock-server-manager/bedrock_server_manager/web/templates/install.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ app_name }} - Install New Server</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/buttons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
    <!-- Add message box CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/messages.css') }}">
    <!-- Ensure scripts.js is loaded -->
    <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Install New Server</h1>
        </header>

        <div id="status-message-area" class="message-box" style="min-height: 1.5em; margin-top: 10px;"></div>

        {% with messages = get_flashed_messages(with_categories=true) %}
             {% if messages %}
                 {% for category, message in messages %}
                     <div class="message-box message-{{ category }}">{{ message }}</div>
                 {% endfor %}
             {% endif %}
         {% endwith %}

        <div id="validation-error-area" style="color: #721c24; margin-bottom: 15px;"></div>

        <section class="install-config-section">

            <div class="form-group">
                <label for="install-server-name" class="form-label">Server Name:</label>
                <input type="text" id="install-server-name" name="server_name" class="form-input" value="{{ server_name or '' }}" required>
                <small>Folder name for the server. No spaces or special chars like ';'.</small>
                 <div class="validation-error" data-field="server_name"></div> <!-- For server-side validation -->
            </div>

            <div class="form-group">
                <label for="install-server-version" class="form-label">Server Version:</label>
                <input type="text" id="install-server-version" name="server_version" class="form-input" value="{{ server_version or 'LATEST' }}" required>
                 <small>E.g., LATEST, PREVIEW, or a specific version like 1.21.0.03</small>
                 <div class="validation-error" data-field="server_version"></div>
            </div>

            <div style="margin-top: 20px;">
                 <!-- Changed button type and added onclick -->
                <button type="button" onclick="triggerInstallServer(this)" class="action-button">Install Server</button>
                <a href="{{ url_for('server_routes.index') }}" class="action-link" style="margin-left: 15px;">Cancel</a>
            </div>
        </section>
    </div>
</body>
</html>