<!-- bedrock-server-manager/bedrock_server_manager/web/templates/restore_menu.html -->
{% extends "base.html" %}

{# Set the page title #}
{% block title %}{{ super() }} - Restore Menu: {{ server_name }}{% endblock %}

{# Add page-specific JS to the head #}
{% block head_scripts %}
    <script src="{{ url_for('static', filename='js/utils.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/backup_restore.js') }}" defer></script> {# Keep if triggerRestoreAll is here #}
{% endblock %}


{# Main content for this page #}
{% block content %}
    {# Page Heading #}
    <h2>Restore Options</h2>
    <p style="margin-bottom: 15px;">Server: <strong>{{ server_name }}</strong></p>

    {# Area for JavaScript-driven status messages #}
    <div id="status-message-area" style="min-height: 1.5em; margin-bottom: 15px;">
        <!-- Status messages from restore actions will appear here -->
    </div>

    {# Server-side flash messages handled by base.html #}

    <section class="restore-menu-section">
        <p>Choose a restore action:</p>

        {# Group restore actions together #}
        <div class="button-group action-buttons-group" style="margin-bottom: 20px;">

            {# Option 1: Use separate forms (as original) but wrapped #}
            <form action="{{ url_for('backup_restore_routes.restore_select_backup_route', server_name=server_name) }}" method="post" style="display: inline-block;"> {# Keep inline-block for side-by-side #}
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="hidden" name="restore_type" value="world">
                <button type="submit" class="action-button">Select World Backup...</button>
            </form>

            <form action="{{ url_for('backup_restore_routes.restore_select_backup_route', server_name=server_name) }}" method="post" style="display: inline-block;"> {# Keep inline-block #}
                 <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                 <input type="hidden" name="restore_type" value="config">
                 <button type="submit" class="action-button">Select Config Backup...</button>
            </form>

            {# Direct JS action #}
            <button type="button" onclick="triggerRestoreAll(this, '{{ server_name }}')" class="action-button">Restore All Now</button>

            {# --- OR --- #}
            {# Option 2: Single form with JS/different endpoints (More complex setup) #}
            {# Example - Requires backend/JS changes #}
            {#
            <button type="button" onclick="navigateToRestoreSelect('world')" class="action-button">Select World Backup...</button>
            <button type="button" onclick="navigateToRestoreSelect('config')" class="action-button">Select Config Backup...</button>
            <button type="button" onclick="triggerRestoreAll(this, '{{ server_name }}')" class="action-button">Restore All Now</button>
             #}

        </div> {# End button-group #}

        {# Navigation Link #}
        <div class="navigation-link"> {# Use consistent class for back link #}
            {# Use main-button for primary navigation back #}
            <a href="{{ url_for('main_routes.index') }}" class="action-button">Return</a>
        </div>

    </section> {# End .restore-menu-section #}

{% endblock %}